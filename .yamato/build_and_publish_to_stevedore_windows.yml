name: Build and Publish To Stevedore Windows x86

agent:
  type: Unity::VM
  image: platform-foundation/windows-vs2019-il2cpp-bokken:latest
  flavor: b1.xlarge

dependencies:
  - path: .yamato/build_and_test_windows.yml
    location: build
    unzip: false

commands:
# upload to stevedore
  - curl -sSo StevedoreUpload.exe "%STEVEDORE_UPLOAD_TOOL_WINDOWS_X64_URL%"
  - StevedoreUpload.exe --version-len=12 --repo=testing --version="%GIT_REVISION%" build\*

artifacts: 
  win32:
    paths:
      - stevedore/artifactid.txt
