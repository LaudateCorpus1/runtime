name: Publish To Stevedore OSX

agent:
  type: Unity::VM::osx
  image: platform-foundation/mac-bokken:latest
  flavor: m1.mac

# build_osx_x64arm64.yml will end up with artifacts for x64, ARM64, and x64+ARM64
dependencies:
  - path: .yamato/build_osx_x64arm64.yml

variables:
  STEVEDORE_REPO: testing

commands:
# upload to stevedore
  - curl -sSo StevedoreUpload "$STEVEDORE_UPLOAD_TOOL_MAC_X64_URL"
  - chmod +x StevedoreUpload
  - ./StevedoreUpload --version-len=12 --repo=$STEVEDORE_REPO --version="$GIT_REVISION" artifacts/unity/*
